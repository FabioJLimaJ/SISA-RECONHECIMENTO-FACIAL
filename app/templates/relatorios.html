{%extends 'base.html' %}

{% block titulo %} Relatorio {% endblock %}


{% block conteudo%}

<main class="max-w-7xl mx-auto py-6 px-4 mt-16 sm:px-6 lg:px-8">
        <div class="space-y-6">
            <div class="bg-white rounded-xl shadow-lg overflow-hidden">
                <div class="bg-[#007BFF] px-6 py-4 flex items-center justify-between">
                    <h1 class="text-2xl font-bold text-white flex items-center">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
                            stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                            class="lucide lucide-bar-chart3 w-6 h-6 mr-3">
                            <path d="M3 3v18h18"></path>
                            <path d="M18 17V9"></path>
                            <path d="M13 17V5"></path>
                            <path d="M8 17v-3"></path>
                        </svg>
                        Relat처rio de Acessos
                    </h1>
                    <form action="{% url 'exportCsv' %}">
                        <input type="hidden" name="x" value="relatorios">
                        <button
                            class="bg-white/20 hover:bg-white/30 text-white font-medium py-2 px-4 rounded-lg transition-colors flex items-center space-x-2">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round" class="lucide lucide-plus w-4 h-4" type="submit">
                                <path d="M5 12h14"></path>
                                <path d="M12 5v14"></path>
                            </svg>
                            <span>Exportar csv</span>
                        </button>
                    </form>
                </div>


                <div class="p-6">

                    <div class="grid grid-cols-2 md:grid-cols-5 gap-4 mb-6">
                        <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 text-center">
                            <div class="text-2xl font-bold text-blue-600">{{total}}</div>
                            <div class="text-sm text-blue-800">Total de Acessos</div>
                        </div>
                        <div class="bg-green-50 border border-green-200 rounded-lg p-4 text-center">
                            <div class="text-2xl font-bold text-green-600">{{liberados}}</div>
                            <div class="text-sm text-green-800">Liberados</div>
                        </div>
                        <div class="bg-red-50 border border-red-200 rounded-lg p-4 text-center">
                            <div class="text-2xl font-bold text-red-600">{{negados}}</div>
                            <div class="text-sm text-red-800">Negados</div>
                        </div>
                        <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 text-center">
                            <div class="text-2xl font-bold text-blue-600">{{face}}</div>
                            <div class="text-sm text-blue-800">Reconhecimento facial</div>
                        </div>
                        <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 text-center">
                            <div class="text-2xl font-bold text-blue-600">{{cartao}}</div>
                            <div class="text-sm text-blue-800">Cart찾o</div>
                        </div>
                    </div>

                    
                    <div class="overflow-x-auto rounded-lg shadow">
                        <table class="min-w-full divide-y divide-gray-200">
                            <thead class="bg-gray-100">
                                <tr>
                                    <th
                                        class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                        Data/Hora</th>
                                    <th
                                        class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                        Nome</th>
                                    <th
                                        class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                        Curso</th>
                                        <th
                                        class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                        Tipo de entrada</th>

                                    <th
                                        class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                        Status</th>
                                </tr>
                            </thead>
                            <tbody class="bg-white divide-y divide-gray-200">
                                <!-- Exemplo de linha -->
                                {% for item in relatorio %}

                                <tr class="hover:bg-gray-50">

                                    <td class="px-6 py-4 text-sm text-gray-900">{{ item.data|date:"d/m/Y H:i" }}</td>
                                    <td class="px-6 py-4 text-sm font-medium text-gray-900">{{item.nome}}</td>
                                    <td class="px-6 py-4 text-sm text-gray-500">{{item.curso}}</td>
                                    {% if item.face_ou_cartao %}

                                    <td class="px-6 py-4 text-sm text-gray-500">Cart찾o</td>
                                    {% else %}
                                    <td class="px-6 py-4 text-sm text-gray-500">Reconhecimento facial</td>
                                    {% endif %}
                                    <td class="px-6 py-4 text-sm text-gray-500">

                                        <div class="flex items-center space-x-1">

                                            {% if item.status %}

                                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none"
                                                stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                                stroke-linejoin="round"
                                                class="lucide lucide-check-circle text-green-600">
                                                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                                                <path d="m9 11 3 3L22 4"></path>
                                            </svg>
                                            <span class="text-green-800 font-medium">Liberado</span>

                                            {% else %}

                                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none"
                                                stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                                stroke-linejoin="round" class="lucide lucide-x-circle text-red-600">
                                                <circle cx="12" cy="12" r="10"></circle>
                                                <path d="m15 9-6 6"></path>
                                                <path d="m9 9 6 6"></path>
                                            </svg>

                                            <span class="text-red-600 font-medium">N찾o Liberado</span>

                                            {% endif %}

                                        </div>

                                    </td>

                                    {% endfor %}
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </main>

{% endblock %}